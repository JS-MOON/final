<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="GoodsMapper">

	<!-- 데이터 입력 -->

	<!-- mainaction -->
	<select id="newTalentList" resultType="com.exe.dto.BoardDTO">
		select
		B.cgcategory1,A.brnum,A.brsubject,A.brmainphoto,A.brprice
		from board
		A,category B where A.cgnum=B.cgnum order by A.brnum desc
	</select>


	<select id="mainCountList" resultType="com.exe.dto.BoardDTO">
		select
		C.mbnickName,C.mbpic,B.cgcategory1,A.brnum,A.brsubject,A.brmainphoto,A.brprice,A.brcount
		from board A,category B,member C
		where A.cgnum=B.cgnum and
		A.mbid=C.mbid order by A.brcount desc
	</select>

	<!-- gDetail -->
	<select id="getReadData" parameterType="int" resultType="com.exe.dto.BoardDTO">
		select
		brnum,mbid,cgnum,brsubject,
		brmainphoto,brmorephoto,brcontent,broptions,brprice,brdate
		from board
		where brnum=#{brnum}
	</select>

	<update id="updateBrCount" parameterType="int">
		update board set
		brcount = brcount + 1 where brnum=#{brnum}
	</update>

	<select id="getReadCategory" parameterType="int"
		resultType="com.exe.dto.CategoryDTO">
		<![CDATA[
		select cgcategory1,cgcategory2 from category where cgnum=#{cgnum}
		]]>
	</select>

	<select id="list" parameterType="int" resultType="com.exe.dto.BoardDTO">
		select
		brnum,brsubject,brmainphoto,brprice from board
		where cgnum=#{cgnum}
		order by brdate desc
	</select>

	<select id="getReadMember" parameterType="String" resultType="com.exe.dto.MemberDTO">
		select mbid,mbpw,mbnickName,mbtel,mbpic,mbabout from member
		where mbid=#{mbid}
	</select>
	
	<select id="cmList" parameterType="int" resultType="com.exe.dto.CommentsDTO">
	select cmnum,brnum,cmcontent,cmnickName,cmdate,cmrating
	from comments where brnum=#{brnum}
	</select>


</mapper>